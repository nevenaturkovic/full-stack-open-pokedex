name: Periodic health check pipeline

on:
  schedule:
    - cron:  '30 5, * * * *'

jobs: 
  periodic_health_check_pipeline:
    runs-on: ubuntu-20.04
      steps:
        - name: Check the deployed service URL
          uses: jtalk/url-health-check-action@v3
          with:
            url: "https://${FLY_APP_NAME}.fly.dev/health"
            max-attempts: 3 
            retry-delay: 5s 